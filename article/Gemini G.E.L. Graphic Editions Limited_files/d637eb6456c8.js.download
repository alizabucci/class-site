var Homepage;(function($){Homepage=function(){return this.init.apply(this,arguments);};Homepage.prototype={defaults:{el:'#homepage-images',items:'>a',interval:5000,},init:function(opt){_.bindAll(this);this.o=$.extend({},this.defaults,opt);this.el=$(this.o.el);this.items=this.el.find(this.o.items);this.current=0;$(window).load(this.loaded);this.el.on('click',this.onElClick);},render:function(){this.el.css({cursor:'pointer'});},resize:function(){this.height=($(window).height()
-$('#header').outerHeight(true)
-$('#footer').outerHeight(true));this.width=Math.floor(this.el.parent().width()*0.828);this.el.css({height:this.height,width:this.width});var self=this;this.items.find('img').each(function(){var img=$(this),w=parseInt(img.attr('width')),h=parseInt(img.attr('height')),r=h/w,maxWidth=self.width,maxHeight=self.height-30;if(w>maxWidth){w=maxWidth;h=Math.floor(w*r);}
if(h>maxHeight){h=maxHeight;w=Math.floor(h/r);}
img.width(w).height(h);});},loaded:function(){$(window).resize(this.resize);this.render();this.resize();this.show(0);this.start();},loadImg:function(i){i=this._index(i);var img=this.items.eq(i).find('>img'),src=img.data('src');if(src){img.attr('src',src);}},_index:function(i){return(i+this.items.length)%this.items.length;},show:function(i){i=this._index(i);this.loadImg(i);this.items.removeClass('active').eq(i).addClass('active');this.current=i;this.loadImg(i+1);this.loadImg(i+2);},next:function(){this.show(this.current+1);},start:function(){this.el.addClass('started');this.interval=setInterval(this.next,this.o.interval);},stop:function(){clearInterval(this.interval);},onElClick:function(e){this.stop();this.next();}};})(jQuery);